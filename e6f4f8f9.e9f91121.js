(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{139:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return p})),n.d(t,"default",(function(){return u}));var a=n(1),r=n(9),i=(n(0),n(147)),o=n(149),s={id:"samples",title:"Sample Endpoint Schemas",sidebar_label:"Sample Endpoint Schemas"},c={id:"gettingStarted/samples",title:"Sample Endpoint Schemas",description:"import useBaseUrl from '@docusaurus/useBaseUrl';",source:"@site/docs/gettingStarted/samples.md",permalink:"/openhim-mediator-mapping/docs/gettingStarted/samples",editUrl:"https://github.com/jembi/openhim-mediator-mapping/edit/master/docs/docs/gettingStarted/samples.md",sidebar_label:"Sample Endpoint Schemas",sidebar:"someSidebar",previous:{title:"Mapping Mediator API",permalink:"/openhim-mediator-mapping/docs/gettingStarted/api"},next:{title:"Content Negotiation",permalink:"/openhim-mediator-mapping/docs/features/content-negotiation"}},p=[{value:"Pre-requisites",id:"pre-requisites",children:[]},{value:"Import Postman Collection",id:"import-postman-collection",children:[]},{value:"Test out Samples",id:"test-out-samples",children:[{value:"Basic Mapping",id:"basic-mapping",children:[]},{value:"FHIR Observations Height Weight",id:"fhir-observations-height-weight",children:[]},{value:"BAHMNI Patient to FHIR",id:"bahmni-patient-to-fhir",children:[]},{value:"Requests DHIS2",id:"requests-dhis2",children:[]},{value:"State Demo",id:"state-demo",children:[]}]}],l={rightToc:p};function u(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Within the Mapping Mediator repository we have created a set of sample Endpoint Schemas to help new users test out some of the Mapping Mediators features."),Object(i.b)("h2",{id:"pre-requisites"},"Pre-requisites"),Object(i.b)("p",null,"To use these sample schemas, you require an instance of the Mapping Mediator running, internet access and ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.postman.com/features/mock-api/"}),"Postman")," installed on your local Linux machine."),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"Note: Start up your Mapping Mediator instance with the flag ",Object(i.b)("inlineCode",{parentName:"p"},"VALIDATION_ACCEPT_NULL_VALUES=true")," to support the BAHMNI test data.")),Object(i.b)("p",null,"If you experience any issues with our sample Endpoints, please log an issue on our ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/jembi/openhim-mediator-mapping/issues"}),"GitHub page"),"."),Object(i.b)("h2",{id:"import-postman-collection"},"Import Postman Collection"),Object(i.b)("p",null,"In your Postman desktop application, click the import button in the top left of the screen. Then click the link tab and paste in the following collection URL: ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.getpostman.com/collections/93d96917e29ee55f56c9"}),"https://www.getpostman.com/collections/93d96917e29ee55f56c9")),Object(i.b)("h2",{id:"test-out-samples"},"Test out Samples"),Object(i.b)("p",null,"The samples cover many of the Mapping Mediator features in common use cases."),Object(i.b)("img",{alt:"Postman Samples",src:Object(o.a)("img/postman-samples.png")}),Object(i.b)("p",null,"All the scenarios will interact with online sandbox services. i.e DHIS2 and HAPI FHIR"),Object(i.b)("h3",{id:"basic-mapping"},"Basic Mapping"),Object(i.b)("p",null,"In this example, a simple flat JSON object containing some patient data is mapped into an output FHIR Patient format."),Object(i.b)("p",null,"Features Covered:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Basic Mapping")),Object(i.b)("h3",{id:"fhir-observations-height-weight"},"FHIR Observations Height Weight"),Object(i.b)("p",null,"The purpose of this example is to demonstrate transformations and response request orchestration.\nIn the example we map incoming patient data into a FHIR Bundle containing multiple observations.\nThe constants section in the Endpoint Schema is used to define static metadata of the output structure."),Object(i.b)("p",null,"Features Covered:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Validation"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Transformation")),Object(i.b)("li",{parentName:"ul"},"Mapping"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Response Orchestration"))),Object(i.b)("h3",{id:"bahmni-patient-to-fhir"},"BAHMNI Patient to FHIR"),Object(i.b)("p",null,"This is part of a real use case where the BAHMNI Patient data needs to be sent to a FHIR server.\nThe example demonstrates more complex mapping and validation situations."),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"Make sure your mapping mediator was started with this flag ",Object(i.b)("inlineCode",{parentName:"p"},"VALIDATION_ACCEPT_NULL_VALUES=true")," (yarn) or ",Object(i.b)("inlineCode",{parentName:"p"},"-e VALIDATION_ACCEPT_NULL_VALUES=true")," (docker)")),Object(i.b)("p",null,"Features Covered:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Validation")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Mapping"))),Object(i.b)("h3",{id:"requests-dhis2"},"Requests DHIS2"),Object(i.b)("p",null,"This example makes three lookup requests to DHIS2.\nThe data from these lookups could have been done in one request but the purpose of this example is to demonstrate aggregating multiple input sources.\nHere we also cover chained endpoint calls.\nThe first endpoint deals with getting data from multiple lookup requests and aggregating it.\nThe second endpoint validates and maps the data into a FHIR Bundle of Location resources."),Object(i.b)("p",null,"Features Covered:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Lookup Orchestration")),Object(i.b)("li",{parentName:"ul"},"Validation"),Object(i.b)("li",{parentName:"ul"},"Mapping"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Chained (internal) Endpoint Orchestration")),Object(i.b)("li",{parentName:"ul"},"Response Orchestration")),Object(i.b)("h3",{id:"state-demo"},"State Demo"),Object(i.b)("p",null,"This example makes two requests to the httpbin API. This API provides configurable mock responses to the client. The first lookup request makes a get request and configures a specific expected https status code. The second lookup request gets a random uuid.\nThese values are then extracted and stored to the Endpoint state. The values are available the next endpoint request. The endpoint state can be configured to only return state data that has desired httpStatus codes. Or data from transactions that didn't experience network issues. The endpoint state default is no filters."),Object(i.b)("p",null,"To test out how state works, run the ",Object(i.b)("inlineCode",{parentName:"p"},"payload")," request a few times with different request body values. Try the following values in succession 201, 404, 400, 300, 201."),Object(i.b)("p",null,"Features Covered:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"State")),Object(i.b)("li",{parentName:"ul"},"Lookup Orchestration"),Object(i.b)("li",{parentName:"ul"},"Transformation"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"Mapping"))))}u.isMDXComponent=!0},147:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=r.a.createContext({}),l=function(e){var t=r.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):s({},t,{},e)),n},u=function(e){var t=l(e.components);return r.a.createElement(p.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),u=l(n),m=a,d=u["".concat(o,".").concat(m)]||u[m]||b[m]||i;return n?r.a.createElement(d,s({ref:t},p,{components:n})):r.a.createElement(d,s({ref:t},p))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var p=2;p<i;p++)o[p]=n[p];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},148:function(e,t,n){"use strict";var a=n(0),r=n(50);t.a=function(){return Object(a.useContext)(r.a)}},149:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(161);var a=n(148);function r(e){var t=(Object(a.a)().siteConfig||{}).baseUrl,n=void 0===t?"/":t;if(!e)return e;return/^(https?:|\/\/)/.test(e)?e:e.startsWith("/")?n+e.slice(1):n+e}},159:function(e,t,n){var a=n(66),r=n(24);e.exports=function(e,t,n){if(a(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(e))}},160:function(e,t,n){var a=n(2)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[a]=!1,!"/./"[e](t)}catch(r){}}return!0}},161:function(e,t,n){"use strict";var a=n(19),r=n(34),i=n(159),o="".startsWith;a(a.P+a.F*n(160)("startsWith"),"String",{startsWith:function(e){var t=i(this,e,"startsWith"),n=r(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),a=String(e);return o?o.call(t,a,n):t.slice(n,n+a.length)===a}})}}]);
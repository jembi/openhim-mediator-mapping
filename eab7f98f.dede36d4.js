(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{140:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return i})),n.d(t,"rightToc",(function(){return p})),n.d(t,"default",(function(){return u}));var r=n(1),o=n(9),a=(n(0),n(147)),c={id:"quick-start",title:"Quick Start",sidebar_label:"Quick Start"},i={id:"gettingStarted/quick-start",title:"Quick Start",description:"This quick start guide should get you up and running in just a few minutes (**without the OpenHIM Core**)",source:"@site/docs/gettingStarted/quick-start.md",permalink:"/openhim-mediator-mapping/docs/gettingStarted/quick-start",editUrl:"https://github.com/jembi/openhim-mediator-mapping/edit/master/docs/docs/gettingStarted/quick-start.md",sidebar_label:"Quick Start",sidebar:"someSidebar",previous:{title:"Introduction",permalink:"/openhim-mediator-mapping/docs/gettingStarted/introduction"},next:{title:"Setup",permalink:"/openhim-mediator-mapping/docs/gettingStarted/setup"}},p=[{value:"Prerequisite",id:"prerequisite",children:[]},{value:"Setup",id:"setup",children:[]},{value:"Test Endpoint",id:"test-endpoint",children:[]}],l={rightToc:p};function u(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"This quick start guide should get you up and running in just a few minutes (",Object(a.b)("strong",{parentName:"p"},"without the OpenHIM Core"),")"),Object(a.b)("h2",{id:"prerequisite"},"Prerequisite"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",Object(r.a)({parentName:"li"},{href:"https://docs.docker.com/get-docker/"}),"Docker")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("a",Object(r.a)({parentName:"li"},{href:"https://docs.docker.com/compose/install/"}),"Docker Compose"))),Object(a.b)("h2",{id:"setup"},"Setup"),Object(a.b)("p",null,"Download the ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/jembi/openhim-mediator-mapping/blob/master/docker-compose.mongo.yml"}),"docker-compose.mongo.yaml")," containing the relevant services for the OpenHIM Mediator Mapping service to start successfully"),Object(a.b)("p",null,"Run the docker compose script by executing the below command"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-sh"}),"docker-compose -f docker-compose.mongo.yml up -d\n")),Object(a.b)("p",null,"The docker image will be downloaded and the containers created."),Object(a.b)("p",null,"You can see the running docker containers by executing the below command"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-sh"}),"docker ps\n")),Object(a.b)("blockquote",null,Object(a.b)("p",{parentName:"blockquote"},Object(a.b)("strong",{parentName:"p"},"NB!")," We will need need to configure our mongodb to be a replica set for the OpenHIM Mediator Mapping application to start up successfully. ",Object(a.b)("br",null))),Object(a.b)("p",null,"To configure our MongDB replica set, we need to get inside of the docker container by executing the below"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-sh"}),"docker exec -it mapper-mongo-1 mongo\n")),Object(a.b)("p",null,"Now we can configure our replica set be executing the below command"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-sh"}),'config = {\n  "_id": "mapper-mongo-set",\n  "members": [\n    {\n      "_id": 0,\n      "priority": 1,\n      "host": "mapper-mongo-1:27017"\n    },\n    {\n      "_id": 1,\n      "priority": 0.5,\n      "host": "mapper-mongo-2:27017"\n    },\n    {\n      "_id": 2,\n      "priority": 0.5,\n      "host": "mapper-mongo-3:27017"\n    }\n  ]\n}\n\nrs.initiate(config)\n')),Object(a.b)("p",null,"Exit the mongo shell then run the following command to run the Mapping Mediator:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-sh"}),"docker run -e OPENHIM_REGISTER=false -e MONGO_URL=mongodb://mapper-mongo-1:27017,mapper-mongo-2:27017,mapper-mongo-3:27017/mapping-mediator?replicaSet=mapper-mongo-set --network mapper-cluster-network --name mapper -p 3003:3003 -d jembi/openhim-mediator-mapping:latest\n")),Object(a.b)("p",null,"We can test that the OpenHIM Mediator Mapping application is running successfully by checking its ",Object(a.b)("inlineCode",{parentName:"p"},"uptime")),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-sh"}),"curl http://localhost:3003/uptime\n")),Object(a.b)("h2",{id:"test-endpoint"},"Test Endpoint"),Object(a.b)("p",null,"Once all the containers are running, we can proceed to creating some endpoints for the OpenHIM Mediator Mapping to listen on."),Object(a.b)("p",null,"For more detailed instructions on how to setup the application, continue to the next step"))}u.isMDXComponent=!0},147:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return d}));var r=n(0),o=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=o.a.createContext({}),u=function(e){var t=o.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i({},t,{},e)),n},s=function(e){var t=u(e.components);return o.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},m=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,l=p(e,["components","mdxType","originalType","parentName"]),s=u(n),m=r,d=s["".concat(c,".").concat(m)]||s[m]||b[m]||a;return n?o.a.createElement(d,i({ref:t},l,{components:n})):o.a.createElement(d,i({ref:t},l))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,c=new Array(a);c[0]=m;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:r,c[1]=i;for(var l=2;l<a;l++)c[l]=n[l];return o.a.createElement.apply(null,c)}return o.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);
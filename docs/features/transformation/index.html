<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/openhim-mediator-mapping/blog/rss.xml" title="OpenHIM Mapping Mediator Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/openhim-mediator-mapping/blog/atom.xml" title="OpenHIM Mapping Mediator Blog Atom Feed"><title data-react-helmet="true">Transformation | OpenHIM Mapping Mediator</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Transformation | OpenHIM Mapping Mediator"><meta data-react-helmet="true" name="description" content="The transformation section of the mapping mediator is useful for doing complex data manipulations within one endpoint call before mapping the data."><meta data-react-helmet="true" property="og:description" content="The transformation section of the mapping mediator is useful for doing complex data manipulations within one endpoint call before mapping the data."><meta data-react-helmet="true" property="og:url" content="https://jembi.github.io/openhim-mediator-mapping/docs/features/transformation"><link data-react-helmet="true" rel="shortcut icon" href="/openhim-mediator-mapping/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://jembi.github.io/openhim-mediator-mapping/docs/features/transformation"><link rel="stylesheet" href="/openhim-mediator-mapping/styles.56123edf.css">
<link rel="preload" href="/openhim-mediator-mapping/styles.c997ef16.js" as="script">
<link rel="preload" href="/openhim-mediator-mapping/runtime~main.f6ee0673.js" as="script">
<link rel="preload" href="/openhim-mediator-mapping/main.fa627847.js" as="script">
<link rel="preload" href="/openhim-mediator-mapping/1.20222c6e.js" as="script">
<link rel="preload" href="/openhim-mediator-mapping/19.12adf8f4.js" as="script">
<link rel="preload" href="/openhim-mediator-mapping/20.44db7229.js" as="script">
<link rel="preload" href="/openhim-mediator-mapping/935f2afb.25d8ad0e.js" as="script">
<link rel="preload" href="/openhim-mediator-mapping/18.aacdcec8.js" as="script">
<link rel="preload" href="/openhim-mediator-mapping/d2faa88e.06233a59.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/openhim-mediator-mapping/"><img src="/openhim-mediator-mapping/img/logo.png" alt="Mapper - OpenHIM Mediator" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/openhim-mediator-mapping/img/logo.png" alt="Mapper - OpenHIM Mediator" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Mapper</strong></a><a class="navbar__item navbar__link" href="/openhim-mediator-mapping/docs/gettingStarted/setup">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/jembi/openhim-mediator-mapping" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/openhim-mediator-mapping/"><img src="/openhim-mediator-mapping/img/logo.png" alt="Mapper - OpenHIM Mediator" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/openhim-mediator-mapping/img/logo.png" alt="Mapper - OpenHIM Mediator" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Mapper</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/openhim-mediator-mapping/docs/gettingStarted/setup">Docs</a></li><li class="menu__list-item"><a href="https://github.com/jembi/openhim-mediator-mapping" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/openhim-mediator-mapping/docs/gettingStarted/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/openhim-mediator-mapping/docs/gettingStarted/quick-start">Quick Start</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/openhim-mediator-mapping/docs/gettingStarted/setup">Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/openhim-mediator-mapping/docs/gettingStarted/endpoints">Endpoints</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/openhim-mediator-mapping/docs/gettingStarted/api">Mapping Mediator API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/openhim-mediator-mapping/docs/gettingStarted/samples">Sample Endpoint Schemas</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Features</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/openhim-mediator-mapping/docs/features/content-negotiation">Content Negotiation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/openhim-mediator-mapping/docs/features/validation">Validation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/openhim-mediator-mapping/docs/features/orchestration">Orchestrations</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/openhim-mediator-mapping/docs/features/transformation">Transformation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/openhim-mediator-mapping/docs/features/mapping">Mapping</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/openhim-mediator-mapping/docs/features/state-management">State Management</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Transformation</h1></header><div class="markdown"><p>The transformation section of the mapping mediator is useful for doing complex data manipulations within one endpoint call before mapping the data.
This helps reduce having to chain endpoint calls to achieve fairly simple data changes.
We use the <a href="https://docs.jsonata.org/overview" target="_blank" rel="noopener noreferrer">JSONata library</a> to perform transformations and here we have listed a few commonly used transforms:</p><ul><li>Replace<br><code>$replace()</code> - this function will find a substring within the supplied value and replace it with your specified string. For example:<br><code>$replace(&#x27;2021-01-01 00:00:00Z&#x27;, &#x27; &#x27;, &#x27;T&#x27;)</code> - this would replace the empty space with a &#x27;T&#x27; to make the timestamp conform to ISO standards - <code>2021-01-01T00:00:00Z</code></li><li>Code mapping<br><code>$lookup()</code> - the first parameter supplied is a collection of key value pairs. The second is a placeholder variable. The lookup function then lookup the placeholder value within the key value collection and return value associated with that key. An example:<br><code>$lookup({&#x27;f&#x27;: &#x27;Female&#x27;, &#x27;m&#x27;: &#x27;Male&#x27;, &#x27;i&#x27;: &#x27;Intersex&#x27;, &#x27;u&#x27;: &#x27;Unknown&#x27;}, biologicalSex)</code> - this would return the corresponding word when supplied a valid key.</li><li>String concatenation<br><code>&amp;</code> - join the string values of the operands into a single resultant string. Values will be cast to strings.<br><code>&#x27;Patient/&#x27; &amp; patient._id</code> =&gt; <code>Patient/123456</code></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/jembi/openhim-mediator-mapping/edit/master/docs/docs/features/transformation.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/openhim-mediator-mapping/docs/features/orchestration"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Orchestrations</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/openhim-mediator-mapping/docs/features/mapping"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Mapping Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Jembi Health Systems.</div></div></div></footer></div>
<script src="/openhim-mediator-mapping/styles.c997ef16.js"></script>
<script src="/openhim-mediator-mapping/runtime~main.f6ee0673.js"></script>
<script src="/openhim-mediator-mapping/main.fa627847.js"></script>
<script src="/openhim-mediator-mapping/1.20222c6e.js"></script>
<script src="/openhim-mediator-mapping/19.12adf8f4.js"></script>
<script src="/openhim-mediator-mapping/20.44db7229.js"></script>
<script src="/openhim-mediator-mapping/935f2afb.25d8ad0e.js"></script>
<script src="/openhim-mediator-mapping/18.aacdcec8.js"></script>
<script src="/openhim-mediator-mapping/d2faa88e.06233a59.js"></script>
</body>
</html>
<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">Sample Endpoint Schemas | OpenHIM Mapping Mediator</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://jembi.github.io/openhim-mediator-mapping/docs/gettingStarted/samples"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Sample Endpoint Schemas | OpenHIM Mapping Mediator"><meta data-react-helmet="true" name="description" content="Within the Mapping Mediator repository we have created a set of sample Endpoint Schemas to help new users test out some of the Mapping Mediators features."><meta data-react-helmet="true" property="og:description" content="Within the Mapping Mediator repository we have created a set of sample Endpoint Schemas to help new users test out some of the Mapping Mediators features."><link data-react-helmet="true" rel="icon" href="/openhim-mediator-mapping/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://jembi.github.io/openhim-mediator-mapping/docs/gettingStarted/samples"><link data-react-helmet="true" rel="alternate" href="https://jembi.github.io/openhim-mediator-mapping/docs/gettingStarted/samples" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://jembi.github.io/openhim-mediator-mapping/docs/gettingStarted/samples" hreflang="x-default"><link rel="stylesheet" href="/openhim-mediator-mapping/assets/css/styles.074c21e8.css">
<link rel="preload" href="/openhim-mediator-mapping/assets/js/runtime~main.e21a296f.js" as="script">
<link rel="preload" href="/openhim-mediator-mapping/assets/js/main.7b65363d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/openhim-mediator-mapping/"><div class="navbar__logo"><img src="/openhim-mediator-mapping/img/logo.png" alt="Mapper - OpenHIM Mediator" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/openhim-mediator-mapping/img/logo.png" alt="Mapper - OpenHIM Mediator" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Mapper</b></a><a class="navbar__item navbar__link" href="/openhim-mediator-mapping/docs/gettingStarted/setup">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/jembi/openhim-mediator-mapping" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_2fq0" href="/openhim-mediator-mapping/docs/gettingStarted/introduction">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openhim-mediator-mapping/docs/gettingStarted/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openhim-mediator-mapping/docs/gettingStarted/quick-start">Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openhim-mediator-mapping/docs/gettingStarted/setup">Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openhim-mediator-mapping/docs/gettingStarted/endpoints">Endpoints</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/openhim-mediator-mapping/docs/gettingStarted/api">Mapping Mediator API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/openhim-mediator-mapping/docs/gettingStarted/samples">Sample Endpoint Schemas</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/openhim-mediator-mapping/docs/features/content-negotiation">Features</a></div></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Sample Endpoint Schemas</h1></header><p>Within the Mapping Mediator repository we have created a set of sample Endpoint Schemas to help new users test out some of the Mapping Mediators features.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="pre-requisites">Pre-requisites<a class="hash-link" href="#pre-requisites" title="Direct link to heading">â€‹</a></h2><p>To use these sample schemas, you require an instance of the Mapping Mediator running, internet access and <a href="https://www.postman.com/features/mock-api/" target="_blank" rel="noopener noreferrer">Postman</a> installed on your local Linux machine.</p><blockquote><p>Note: Start up your Mapping Mediator instance with the flag <code>VALIDATION_ACCEPT_NULL_VALUES=true</code> to support the BAHMNI test data.</p></blockquote><p>If you experience any issues with our sample Endpoints, please log an issue on our <a href="https://github.com/jembi/openhim-mediator-mapping/issues" target="_blank" rel="noopener noreferrer">GitHub page</a>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="import-postman-collection">Import Postman Collection<a class="hash-link" href="#import-postman-collection" title="Direct link to heading">â€‹</a></h2><p>In your Postman desktop application, click the import button in the top left of the screen. Then click the link tab and paste in the following collection URL: <a href="https://www.getpostman.com/collections/93d96917e29ee55f56c9" target="_blank" rel="noopener noreferrer">https://www.getpostman.com/collections/93d96917e29ee55f56c9</a></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="test-out-samples">Test out Samples<a class="hash-link" href="#test-out-samples" title="Direct link to heading">â€‹</a></h2><p>The samples cover many of the Mapping Mediator features in common use cases.</p><img alt="Postman Samples" src="/openhim-mediator-mapping/img/postman-samples.png"><p>All the scenarios will interact with online sandbox services. i.e DHIS2 and HAPI FHIR</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="basic-mapping">Basic Mapping<a class="hash-link" href="#basic-mapping" title="Direct link to heading">â€‹</a></h3><p>In this example, a simple flat JSON object containing some patient data is mapped into an output FHIR Patient format.</p><p>Features Covered:</p><ul><li>Basic Mapping</li></ul><h3 class="anchor anchorWithStickyNavbar_31ik" id="fhir-observations-height-weight">FHIR Observations Height Weight<a class="hash-link" href="#fhir-observations-height-weight" title="Direct link to heading">â€‹</a></h3><p>The purpose of this example is to demonstrate transformations and response request orchestration.
In the example we map incoming patient data into a FHIR Bundle containing multiple observations.
The constants section in the Endpoint Schema is used to define static metadata of the output structure.</p><p>Features Covered:</p><ul><li>Validation</li><li><strong>Transformation</strong></li><li>Mapping</li><li><strong>Response Orchestration</strong></li></ul><h3 class="anchor anchorWithStickyNavbar_31ik" id="bahmni-patient-to-fhir">BAHMNI Patient to FHIR<a class="hash-link" href="#bahmni-patient-to-fhir" title="Direct link to heading">â€‹</a></h3><p>This is part of a real use case where the BAHMNI Patient data needs to be sent to a FHIR server.
The example demonstrates more complex mapping and validation situations.</p><blockquote><p>Make sure your mapping mediator was started with this flag <code>VALIDATION_ACCEPT_NULL_VALUES=true</code> (yarn) or <code>-e VALIDATION_ACCEPT_NULL_VALUES=true</code> (docker)</p></blockquote><p>Features Covered:</p><ul><li><strong>Validation</strong></li><li><strong>Mapping</strong></li></ul><h3 class="anchor anchorWithStickyNavbar_31ik" id="requests-dhis2">Requests DHIS2<a class="hash-link" href="#requests-dhis2" title="Direct link to heading">â€‹</a></h3><p>This example makes three lookup requests to DHIS2.
The data from these lookups could have been done in one request but the purpose of this example is to demonstrate aggregating multiple input sources.
Here we also cover chained endpoint calls.
The first endpoint deals with getting data from multiple lookup requests and aggregating it.
The second endpoint validates and maps the data into a FHIR Bundle of Location resources.</p><p>Features Covered:</p><ul><li><strong>Lookup Orchestration</strong></li><li>Validation</li><li>Mapping</li><li><strong>Chained (internal) Endpoint Orchestration</strong></li><li>Response Orchestration</li></ul><h3 class="anchor anchorWithStickyNavbar_31ik" id="state-demo">State Demo<a class="hash-link" href="#state-demo" title="Direct link to heading">â€‹</a></h3><p>This example makes two requests to the httpbin API. This API provides configurable mock responses to the client. The first lookup request makes a get request and configures a specific expected https status code. The second lookup request gets a random uuid.
These values are then extracted and stored to the Endpoint state. The values are available the next endpoint request. The endpoint state can be configured to only return state data that has desired httpStatus codes. Or data from transactions that didn&#x27;t experience network issues. The endpoint state default is no filters.</p><p>To test out how state works, run the <code>payload</code> request a few times with different request body values. Try the following values in succession 201, 404, 400, 300, 201.</p><p>Features Covered:</p><ul><li><strong>State</strong></li><li>Lookup Orchestration</li><li>Transformation</li><li><strong>Mapping</strong></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/jembi/openhim-mediator-mapping/edit/master/docs/docs/gettingStarted/samples.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/openhim-mediator-mapping/docs/gettingStarted/api"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Mapping Mediator API</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/openhim-mediator-mapping/docs/features/content-negotiation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Content Negotiation</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pre-requisites" class="table-of-contents__link toc-highlight">Pre-requisites</a></li><li><a href="#import-postman-collection" class="table-of-contents__link toc-highlight">Import Postman Collection</a></li><li><a href="#test-out-samples" class="table-of-contents__link toc-highlight">Test out Samples</a><ul><li><a href="#basic-mapping" class="table-of-contents__link toc-highlight">Basic Mapping</a></li><li><a href="#fhir-observations-height-weight" class="table-of-contents__link toc-highlight">FHIR Observations Height Weight</a></li><li><a href="#bahmni-patient-to-fhir" class="table-of-contents__link toc-highlight">BAHMNI Patient to FHIR</a></li><li><a href="#requests-dhis2" class="table-of-contents__link toc-highlight">Requests DHIS2</a></li><li><a href="#state-demo" class="table-of-contents__link toc-highlight">State Demo</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Jembi Health Systems.</div></div></div></footer></div>
<script src="/openhim-mediator-mapping/assets/js/runtime~main.e21a296f.js"></script>
<script src="/openhim-mediator-mapping/assets/js/main.7b65363d.js"></script>
</body>
</html>
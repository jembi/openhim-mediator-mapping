"use strict";(self.webpackChunkmapping_mediator=self.webpackChunkmapping_mediator||[]).push([[877],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return f}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),s=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=s(n),f=a,d=m["".concat(p,".").concat(f)]||m[f]||c[f]||i;return n?r.createElement(d,o(o({ref:t},u),{},{components:n})):r.createElement(d,o({ref:t},u))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5427:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return p},metadata:function(){return s},toc:function(){return u},default:function(){return m}});var r=n(3117),a=n(102),i=(n(7294),n(3905)),o=["components"],l={id:"transformation",title:"Transformation",sidebar_label:"Transformation"},p=void 0,s={unversionedId:"features/transformation",id:"features/transformation",title:"Transformation",description:"The transformation section of the mapping mediator is useful for doing complex data manipulations within one endpoint call before mapping the data.",source:"@site/docs/features/transformation.md",sourceDirName:"features",slug:"/features/transformation",permalink:"/openhim-mediator-mapping/docs/features/transformation",editUrl:"https://github.com/jembi/openhim-mediator-mapping/edit/master/docs/docs/features/transformation.md",tags:[],version:"current",frontMatter:{id:"transformation",title:"Transformation",sidebar_label:"Transformation"},sidebar:"someSidebar",previous:{title:"Kafka Integration",permalink:"/openhim-mediator-mapping/docs/features/kafka-integration"},next:{title:"Mapping",permalink:"/openhim-mediator-mapping/docs/features/mapping"}},u=[],c={toc:u};function m(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"The transformation section of the mapping mediator is useful for doing complex data manipulations within one endpoint call before mapping the data.\nThis helps reduce having to chain endpoint calls to achieve fairly simple data changes.\nWe use the ",(0,i.kt)("a",{parentName:"p",href:"https://docs.jsonata.org/overview"},"JSONata library")," to perform transformations and here we have listed a few commonly used transforms:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Replace",(0,i.kt)("br",null),(0,i.kt)("inlineCode",{parentName:"li"},"$replace()")," - this function will find a substring within the supplied value and replace it with your specified string. For example:",(0,i.kt)("br",null),(0,i.kt)("inlineCode",{parentName:"li"},"$replace('2021-01-01 00:00:00Z', ' ', 'T')")," - this would replace the empty space with a 'T' to make the timestamp conform to ISO standards - ",(0,i.kt)("inlineCode",{parentName:"li"},"2021-01-01T00:00:00Z")),(0,i.kt)("li",{parentName:"ul"},"Code mapping",(0,i.kt)("br",null),(0,i.kt)("inlineCode",{parentName:"li"},"$lookup()")," - the first parameter supplied is a collection of key value pairs. The second is a placeholder variable. The lookup function then lookup the placeholder value within the key value collection and return value associated with that key. An example:",(0,i.kt)("br",null),(0,i.kt)("inlineCode",{parentName:"li"},"$lookup({'f': 'Female', 'm': 'Male', 'i': 'Intersex', 'u': 'Unknown'}, biologicalSex)")," - this would return the corresponding word when supplied a valid key."),(0,i.kt)("li",{parentName:"ul"},"String concatenation",(0,i.kt)("br",null),(0,i.kt)("inlineCode",{parentName:"li"},"&")," - join the string values of the operands into a single resultant string. Values will be cast to strings.",(0,i.kt)("br",null),(0,i.kt)("inlineCode",{parentName:"li"},"'Patient/' & patient._id")," => ",(0,i.kt)("inlineCode",{parentName:"li"},"Patient/123456"))))}m.isMDXComponent=!0}}]);